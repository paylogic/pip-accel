# appveyor.yml: Configuration for continuous integration (automated tests)
# hosted on AppVeyor, see https://ci.appveyor.com/project/xolox/pip-accel.
#
# This uses a forked coveralls-python until my pull request is merged:
# https://github.com/coagulant/coveralls-python/pull/97

version: 1.0.{build}
clone_depth: 1
environment:
  PYTHON: C:\Python27
  COVERALLS_REPO_TOKEN:
    secure: DCxZQaYFWVR0zWqjTPXhhlRlLdmKNMS2qDUwIR8jRar13clunOqJIaXn+vKInS7g
install:
  - cmd: 'gem install fakes3'
  - cmd: '"%PYTHON%\Scripts\pip.exe" install --quiet https://github.com/coagulant/coveralls-python/archive/master.zip'
  - cmd: 'scripts\prepare-test-environment.cmd'
build: off
test_script:
  - cmd: 'DIR "%PYTHON%\Scripts'
  - cmd: '"%PYTHON%\Scripts\coverage.exe" run setup.py test'
on_success:
  - cmd: '"%PYTHON%\Scripts\coveralls.exe"'
